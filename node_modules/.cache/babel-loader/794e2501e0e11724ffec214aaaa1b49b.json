{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { EMPTY_ID, isIdZeroLevel, createId, getRootParentId, getIdWithoutRootParentId, getAllShortIds } from './itemIdUtils';\nimport SortedPublicItemIds from './SortedPublicItemIds';\nimport { getNestedValue } from './misc';\n/**\n * @hidden\n */\n\nexport function hasChildren(item, childrenField) {\n  var children = getNestedValue(childrenField, item);\n  return Boolean(children && children.length);\n}\n/**\n * @hidden\n */\n\nexport function isItemExpandedAndWithChildren(item, fieldsSvc) {\n  return fieldsSvc.expanded(item) && hasChildren(item, fieldsSvc.getChildrenField());\n}\n/**\n * @hidden\n */\n\nexport function resolveItemId(publicId, idField, items, childrenField) {\n  var resolvedIds = resolveItemsIds([publicId], idField, items, childrenField);\n  return resolvedIds.length ? resolvedIds[0] : undefined;\n}\n/**\n * @hidden\n */\n\nexport function resolveItemsIds(publicIds, idField, items, childrenField) {\n  var result = [];\n  var sortedIds = new SortedPublicItemIds();\n  sortedIds.init(publicIds);\n  resolveItemsIdsHelper(sortedIds, idField, items, EMPTY_ID, result, childrenField);\n  return result;\n}\n/**\n * @hidden\n */\n\nexport function updateItem(items, itemId, update, cloneField, childrenField) {\n  var _a;\n\n  var itemIndex = Number(getRootParentId(itemId));\n\n  if (itemIndex >= items.length) {\n    return items;\n  }\n\n  var result = items;\n  var item = items[itemIndex]; // Clone the item before updating it.\n\n  if (!item[cloneField]) {\n    result = items.slice();\n    item = result[itemIndex] = Object.assign({}, item, (_a = {}, _a[cloneField] = true, _a));\n  } // Directly update the item.\n\n\n  if (isIdZeroLevel(itemId)) {\n    update(item);\n  } else if (item[childrenField]) {\n    item[childrenField] = updateItem(item[childrenField], getIdWithoutRootParentId(itemId), update, cloneField, childrenField);\n  }\n\n  return result;\n}\n/**\n * @hidden\n */\n\nexport function isEnabledAndAllParentsEnabled(itemId, items, fieldsSvc) {\n  var ids = getAllShortIds(itemId);\n  var currentItems = items;\n\n  for (var i = 0; i < ids.length; i++) {\n    var currentItem = currentItems[Number(ids[i])];\n\n    if (fieldsSvc.disabled(currentItem)) {\n      return false;\n    } else {\n      currentItems = currentItem[fieldsSvc.getChildrenField()];\n    }\n  }\n\n  return true;\n}\n/**\n * @hidden\n */\n\nexport function getAllDirectIndirectChildrenIds(item, itemId, childrenField, idField) {\n  return idField ? getChildrenPublicIds(item) : getChildrenHierarchicalIndices(item, itemId);\n\n  function getChildrenHierarchicalIndices(startItem, startItemId) {\n    var result = [];\n    var children = startItem[childrenField] || [];\n\n    for (var i = 0; i < children.length; i++) {\n      var id = createId(i, startItemId);\n      result.push(id);\n      result = result.concat(getChildrenHierarchicalIndices(children[i], id));\n    }\n\n    return result;\n  }\n\n  function getChildrenPublicIds(startItem) {\n    var result = [];\n    var children = startItem[childrenField] || [];\n\n    for (var i = 0; i < children.length; i++) {\n      result.push(getNestedValue(idField, children[i]));\n      result = result.concat(getChildrenPublicIds(children[i]));\n    }\n\n    return result;\n  }\n}\n/**\n * @hidden\n */\n\nexport function areAllDirectChildrenChecked(item, itemId, idField, childrenField, check) {\n  var children = item[childrenField] || [];\n  return children.every(function (child, index) {\n    return check.indexOf(idField ? getNestedValue(idField, child) : createId(index, itemId)) > -1;\n  });\n}\n/**\n * @hidden\n */\n\nexport function getAllParents(itemId, childrenField, items) {\n  var result = [];\n  var ids = getAllShortIds(itemId);\n  var currentItems = items;\n\n  for (var i = 0; i < ids.length - 1; i++) {\n    if (!currentItems) {\n      break;\n    }\n\n    var currentItem = currentItems[Number(ids[i])];\n    result.push(currentItem);\n    currentItems = currentItem[childrenField];\n  }\n\n  return result;\n}\n/**\n * @hidden\n */\n\nexport function removeItem(itemId, childrenField, items) {\n  var result = items.slice();\n\n  if (isIdZeroLevel(itemId)) {\n    result.splice(Number(itemId), 1);\n  } else {\n    var rootParentIndex = Number(getRootParentId(itemId));\n\n    var rootParent = result[rootParentIndex] = __assign({}, result[rootParentIndex]);\n\n    rootParent[childrenField] = removeItem(getIdWithoutRootParentId(itemId), childrenField, rootParent[childrenField]);\n  }\n\n  return result;\n}\n/**\n * @hidden\n */\n\nexport function addItem(item, operation, childrenField, targetItemId, items) {\n  var result = items.slice();\n\n  if (isIdZeroLevel(targetItemId)) {\n    if (operation === 'child') {\n      var targetItem = result[Number(targetItemId)] = __assign({}, result[Number(targetItemId)]);\n\n      if (targetItem[childrenField]) {\n        targetItem[childrenField] = targetItem[childrenField].slice();\n        targetItem[childrenField].push(item);\n      } else {\n        targetItem[childrenField] = [item];\n      }\n    } else {\n      result.splice(Number(targetItemId) + (operation === 'after' ? 1 : 0), 0, item);\n    }\n  } else {\n    var rootParentIndex = Number(getRootParentId(targetItemId));\n\n    var rootParent = result[rootParentIndex] = __assign({}, result[rootParentIndex]);\n\n    rootParent[childrenField] = addItem(item, operation, childrenField, getIdWithoutRootParentId(targetItemId), rootParent[childrenField]);\n  }\n\n  return result;\n}\n\nfunction resolveItemsIdsHelper(publicItemIds, idField, items, parentItemId, resolvedIds, childrenField) {\n  for (var i = 0; i < items.length; i++) {\n    var item = items[i];\n    var id = createId(i, parentItemId);\n\n    if (publicItemIds.hasId(getNestedValue(idField, item))) {\n      resolvedIds.push(id);\n    }\n\n    if (hasChildren(item, childrenField)) {\n      resolveItemsIdsHelper(publicItemIds, idField, getNestedValue(childrenField, item), id, resolvedIds, childrenField);\n    }\n  }\n}","map":{"version":3,"sources":["../../../src/utils/itemUtils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { EMPTY_ID, isIdZeroLevel, createId, getRootParentId, getIdWithoutRootParentId, getAllShortIds } from './itemIdUtils';\nimport SortedPublicItemIds from './SortedPublicItemIds';\nimport { getNestedValue } from './misc';\n/**\n * @hidden\n */\nexport function hasChildren(item, childrenField) {\n    var children = getNestedValue(childrenField, item);\n    return Boolean(children && children.length);\n}\n/**\n * @hidden\n */\nexport function isItemExpandedAndWithChildren(item, fieldsSvc) {\n    return fieldsSvc.expanded(item) && hasChildren(item, fieldsSvc.getChildrenField());\n}\n/**\n * @hidden\n */\nexport function resolveItemId(publicId, idField, items, childrenField) {\n    var resolvedIds = resolveItemsIds([publicId], idField, items, childrenField);\n    return resolvedIds.length ? resolvedIds[0] : undefined;\n}\n/**\n * @hidden\n */\nexport function resolveItemsIds(publicIds, idField, items, childrenField) {\n    var result = [];\n    var sortedIds = new SortedPublicItemIds();\n    sortedIds.init(publicIds);\n    resolveItemsIdsHelper(sortedIds, idField, items, EMPTY_ID, result, childrenField);\n    return result;\n}\n/**\n * @hidden\n */\nexport function updateItem(items, itemId, update, cloneField, childrenField) {\n    var _a;\n    var itemIndex = Number(getRootParentId(itemId));\n    if (itemIndex >= items.length) {\n        return items;\n    }\n    var result = items;\n    var item = items[itemIndex];\n    // Clone the item before updating it.\n    if (!item[cloneField]) {\n        result = items.slice();\n        item = result[itemIndex] = Object.assign({}, item, (_a = {}, _a[cloneField] = true, _a));\n    }\n    // Directly update the item.\n    if (isIdZeroLevel(itemId)) {\n        update(item);\n    }\n    else if (item[childrenField]) {\n        item[childrenField] = updateItem(item[childrenField], getIdWithoutRootParentId(itemId), update, cloneField, childrenField);\n    }\n    return result;\n}\n/**\n * @hidden\n */\nexport function isEnabledAndAllParentsEnabled(itemId, items, fieldsSvc) {\n    var ids = getAllShortIds(itemId);\n    var currentItems = items;\n    for (var i = 0; i < ids.length; i++) {\n        var currentItem = currentItems[Number(ids[i])];\n        if (fieldsSvc.disabled(currentItem)) {\n            return false;\n        }\n        else {\n            currentItems = currentItem[fieldsSvc.getChildrenField()];\n        }\n    }\n    return true;\n}\n/**\n * @hidden\n */\nexport function getAllDirectIndirectChildrenIds(item, itemId, childrenField, idField) {\n    return idField ? getChildrenPublicIds(item) : getChildrenHierarchicalIndices(item, itemId);\n    function getChildrenHierarchicalIndices(startItem, startItemId) {\n        var result = [];\n        var children = startItem[childrenField] || [];\n        for (var i = 0; i < children.length; i++) {\n            var id = createId(i, startItemId);\n            result.push(id);\n            result = result.concat(getChildrenHierarchicalIndices(children[i], id));\n        }\n        return result;\n    }\n    function getChildrenPublicIds(startItem) {\n        var result = [];\n        var children = startItem[childrenField] || [];\n        for (var i = 0; i < children.length; i++) {\n            result.push(getNestedValue(idField, children[i]));\n            result = result.concat(getChildrenPublicIds(children[i]));\n        }\n        return result;\n    }\n}\n/**\n * @hidden\n */\nexport function areAllDirectChildrenChecked(item, itemId, idField, childrenField, check) {\n    var children = item[childrenField] || [];\n    return children.every(function (child, index) {\n        return check.indexOf(idField ? getNestedValue(idField, child) : createId(index, itemId)) > -1;\n    });\n}\n/**\n * @hidden\n */\nexport function getAllParents(itemId, childrenField, items) {\n    var result = [];\n    var ids = getAllShortIds(itemId);\n    var currentItems = items;\n    for (var i = 0; i < ids.length - 1; i++) {\n        if (!currentItems) {\n            break;\n        }\n        var currentItem = currentItems[Number(ids[i])];\n        result.push(currentItem);\n        currentItems = currentItem[childrenField];\n    }\n    return result;\n}\n/**\n * @hidden\n */\nexport function removeItem(itemId, childrenField, items) {\n    var result = items.slice();\n    if (isIdZeroLevel(itemId)) {\n        result.splice(Number(itemId), 1);\n    }\n    else {\n        var rootParentIndex = Number(getRootParentId(itemId));\n        var rootParent = result[rootParentIndex] = __assign({}, result[rootParentIndex]);\n        rootParent[childrenField] = removeItem(getIdWithoutRootParentId(itemId), childrenField, rootParent[childrenField]);\n    }\n    return result;\n}\n/**\n * @hidden\n */\nexport function addItem(item, operation, childrenField, targetItemId, items) {\n    var result = items.slice();\n    if (isIdZeroLevel(targetItemId)) {\n        if (operation === 'child') {\n            var targetItem = result[Number(targetItemId)] = __assign({}, result[Number(targetItemId)]);\n            if (targetItem[childrenField]) {\n                targetItem[childrenField] = targetItem[childrenField].slice();\n                targetItem[childrenField].push(item);\n            }\n            else {\n                targetItem[childrenField] = [item];\n            }\n        }\n        else {\n            result.splice(Number(targetItemId) + (operation === 'after' ? 1 : 0), 0, item);\n        }\n    }\n    else {\n        var rootParentIndex = Number(getRootParentId(targetItemId));\n        var rootParent = result[rootParentIndex] = __assign({}, result[rootParentIndex]);\n        rootParent[childrenField] = addItem(item, operation, childrenField, getIdWithoutRootParentId(targetItemId), rootParent[childrenField]);\n    }\n    return result;\n}\nfunction resolveItemsIdsHelper(publicItemIds, idField, items, parentItemId, resolvedIds, childrenField) {\n    for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        var id = createId(i, parentItemId);\n        if (publicItemIds.hasId(getNestedValue(idField, item))) {\n            resolvedIds.push(id);\n        }\n        if (hasChildren(item, childrenField)) {\n            resolveItemsIdsHelper(publicItemIds, idField, getNestedValue(childrenField, item), id, resolvedIds, childrenField);\n        }\n    }\n}\n//# sourceMappingURL=itemUtils.js.map"]},"metadata":{},"sourceType":"module"}