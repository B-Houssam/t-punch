{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, noop, useRtl, getTabIndex, Keys, mapTree, extendDataItem, guid } from '@progress/kendo-react-common';\nimport { Popup } from '@progress/kendo-react-popup';\nimport { useLocalization } from '@progress/kendo-react-intl';\nimport { TreeView } from '@progress/kendo-react-treeview';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './../package-metadata';\nimport { getItemValue, areSame, isPresent } from '../common/utils';\nimport { useDropdownWidth } from './useDropdownWidth';\nimport { ListNoData } from './ListNoData';\nimport { messages, clear, nodata } from './../messages';\nimport { FloatingLabel } from '@progress/kendo-react-labels';\nvar VALIDATION_MESSAGE = 'Please select a value from the list!';\n\nvar ValueHolder = function (props) {\n  return React.createElement(React.Fragment, null, props.children);\n};\n\nvar toLevel = function (hierarchicalIndex) {\n  return hierarchicalIndex.split('_').map(function (i) {\n    return parseInt(i, 10);\n  });\n};\n\nvar getValidity = function (_a, hasValue) {\n  var validationMessage = _a.validationMessage,\n      valid = _a.valid,\n      required = _a.required;\n  return {\n    customError: validationMessage !== undefined,\n    valid: Boolean(valid !== undefined ? valid : !required || hasValue),\n    valueMissing: !hasValue\n  };\n};\n\nvar defaultProps = {\n  selectField: 'selected',\n  subItemsField: 'items',\n  popupSettings: {\n    animate: true,\n    width: '200px',\n    height: '200px'\n  },\n  required: false,\n  validityStyles: true\n};\n/**\n * Represents the DropDownTree component.\n */\n\nexport var DropDownTree = React.forwardRef(function (props, ref) {\n  validatePackage(packageMetadata);\n  var calculatedId = React.useMemo(function () {\n    return guid();\n  }, []);\n  var id = props.id || calculatedId;\n  var _a = props.data,\n      data = _a === void 0 ? [] : _a,\n      dataItemKey = props.dataItemKey,\n      _b = props.popupSettings,\n      popupSettings = _b === void 0 ? {} : _b,\n      _c = props.style,\n      style = _c === void 0 ? {} : _c,\n      opened = props.opened,\n      disabled = props.disabled,\n      _d = props.onOpen,\n      onOpen = _d === void 0 ? noop : _d,\n      _e = props.onClose,\n      onClose = _e === void 0 ? noop : _e,\n      placeholder = props.placeholder,\n      label = props.label,\n      name = props.name,\n      _f = props.selectField,\n      selectField = _f === void 0 ? defaultProps.selectField : _f,\n      _g = props.subItemsField,\n      subItemsField = _g === void 0 ? defaultProps.subItemsField : _g,\n      validationMessage = props.validationMessage,\n      valid = props.valid,\n      _h = props.required,\n      required = _h === void 0 ? defaultProps.required : _h,\n      _j = props.validityStyles,\n      validityStyles = _j === void 0 ? defaultProps.validityStyles : _j;\n  var tabIndex = getTabIndex(props.tabIndex, disabled);\n  var target = React.useRef(null);\n  var elementRef = React.useRef(null);\n  var inputRef = React.useRef(null);\n  var selectRef = React.useRef(null);\n  var treeViewRef = React.useRef(null);\n  var skipFocusRef = React.useRef(false);\n\n  var _k = React.useState(undefined),\n      stateValue = _k[0],\n      setStateValue = _k[1];\n\n  var controlled = props.value !== undefined;\n  var value = controlled ? props.value : stateValue !== undefined ? stateValue : props.defaultValue;\n  var hasValue = isPresent(value);\n  var currentValueText = hasValue ? getItemValue(value, props.textField) : '';\n  var validity = getValidity({\n    validationMessage: validationMessage,\n    valid: valid,\n    required: required\n  }, hasValue);\n  var focus = React.useCallback(function () {\n    return elementRef.current && elementRef.current.focus();\n  }, []);\n  React.useImperativeHandle(target, function () {\n    return {\n      props: props,\n      element: elementRef.current,\n      actionElement: elementRef.current,\n      focus: focus\n    };\n  });\n  React.useImperativeHandle(ref, function () {\n    return target.current;\n  });\n  var dir = useRtl(elementRef, props.dir);\n  var initialStyleWidth = popupSettings.width !== undefined ? popupSettings.width : style.width !== undefined ? style.width : defaultProps.popupSettings.width;\n  var popupWidth = useDropdownWidth(elementRef, initialStyleWidth);\n\n  var popupStyles = __assign({\n    width: popupWidth\n  }, dir !== undefined ? {\n    direction: dir\n  } : {});\n\n  var _l = React.useState(false),\n      open = _l[0],\n      setOpen = _l[1];\n\n  var isOpen = opened !== undefined ? opened : open;\n\n  var _m = React.useState(false),\n      focused = _m[0],\n      setFocused = _m[1];\n\n  var _o = React.useState(''),\n      filter = _o[0],\n      setFilter = _o[1];\n\n  var setValidity = React.useCallback(function () {\n    if (selectRef.current && selectRef.current.setCustomValidity) {\n      selectRef.current.setCustomValidity(validity.valid ? '' : validationMessage === undefined ? VALIDATION_MESSAGE : validationMessage);\n    }\n  }, [validationMessage, validity]);\n  React.useEffect(setValidity);\n  var openPopup = React.useCallback(function (event) {\n    if (!isOpen) {\n      if (onOpen) {\n        var openEvent = __assign({}, event);\n\n        onOpen.call(undefined, openEvent);\n      }\n\n      if (opened === undefined) {\n        setOpen(true);\n      }\n    }\n  }, [isOpen, opened, onOpen]);\n  var closePopup = React.useCallback(function (event) {\n    if (isOpen) {\n      if (onClose) {\n        var closeEvent = __assign({}, event);\n\n        onClose.call(undefined, closeEvent);\n      }\n\n      if (opened === undefined) {\n        setOpen(false);\n      }\n    }\n  }, [isOpen, opened, onClose]);\n  var onWrapperClick = React.useCallback(function (event) {\n    if (!event.isDefaultPrevented() && target.current) {\n      setFocused(true);\n      var ev = {\n        syntheticEvent: event,\n        nativeEvent: event.nativeEvent,\n        target: target.current\n      };\n      (isOpen ? closePopup : openPopup)(ev);\n    }\n  }, [isOpen, opened, onOpen, onClose]);\n  var switchFocus = React.useCallback(function (focusFn) {\n    skipFocusRef.current = true;\n    focusFn();\n    window.setTimeout(function () {\n      return skipFocusRef.current = false;\n    }, 0);\n  }, []);\n  var onWrapperKeyDown = React.useCallback(function (event) {\n    var keyCode = event.keyCode,\n        altKey = event.altKey;\n    var treeview = treeViewRef.current && treeViewRef.current.element;\n\n    if (!target.current || event.isDefaultPrevented() && inputRef.current === event.target) {\n      return;\n    }\n\n    var ev = {\n      syntheticEvent: event,\n      nativeEvent: event.nativeEvent,\n      target: target.current\n    };\n\n    if (isOpen) {\n      if (keyCode === Keys.esc || altKey && keyCode === Keys.up) {\n        closePopup(ev);\n      } else if (treeview && treeview.querySelector('.k-state-focused') && (keyCode === Keys.up || keyCode === Keys.down || keyCode === Keys.left || keyCode === Keys.right || keyCode === Keys.home || keyCode === Keys.end)) {\n        if (keyCode === Keys.up && inputRef.current) {\n          var items = Array.from(treeview.querySelectorAll('.k-treeview-item'));\n          var focusedItem = items.slice().reverse().find(function (i) {\n            return Boolean(i && i.querySelector('.k-state-focused'));\n          });\n\n          if (focusedItem && items.indexOf(focusedItem) === 0) {\n            return switchFocus(function () {\n              focusElement(inputRef.current);\n            });\n          }\n        }\n\n        switchFocus(noop);\n      } else if (keyCode === Keys.down) {\n        switchFocus(function () {\n          focusElement(inputRef.current || treeview);\n        });\n      }\n    } else {\n      if (altKey && keyCode === Keys.down) {\n        openPopup(ev);\n      }\n    }\n  }, [isOpen, opened, onOpen, onClose]);\n  var onInputKeyDown = React.useCallback(function (event) {\n    var keyCode = event.keyCode,\n        altKey = event.altKey;\n\n    if (altKey || keyCode !== Keys.up && keyCode !== Keys.down) {\n      return;\n    }\n\n    event.preventDefault();\n    switchFocus(keyCode === Keys.up ? function () {\n      focusElement(elementRef.current);\n    } : function () {\n      focusElement(treeViewRef.current && treeViewRef.current.element);\n    });\n  }, []);\n  var focusElement = React.useCallback(function (element) {\n    if (element) {\n      switchFocus(function () {\n        return element.focus();\n      });\n    }\n  }, []);\n  var onPopupOpened = React.useCallback(function () {\n    if (!focused && isOpen) {\n      closePopup({\n        target: target.current\n      });\n    } else {\n      if (props.filterable) {\n        focusElement(inputRef.current);\n      } else {\n        focusElement(treeViewRef.current && treeViewRef.current.element);\n      }\n    }\n  }, [onClose, props.filterable, focused, opened, isOpen]);\n  var onPopupClosed = React.useCallback(function () {\n    if (focused) {\n      // Move the focus from treeview to dropdown without triggering Focus or Blur events.\n      focusElement(elementRef.current);\n    }\n  }, [focused]);\n  var onFocus = React.useCallback(function (event) {\n    if (!focused && !skipFocusRef.current) {\n      setFocused(true);\n\n      if (props.onFocus && target.current) {\n        var focusEvent = {\n          syntheticEvent: event,\n          nativeEvent: event.nativeEvent,\n          target: target.current\n        };\n        props.onFocus.call(undefined, focusEvent);\n      }\n    }\n  }, [focused, props.onFocus]);\n  var onBlur = React.useCallback(function (event) {\n    if (focused && !skipFocusRef.current && target.current) {\n      setFocused(false);\n      var ev = {\n        syntheticEvent: event,\n        nativeEvent: event.nativeEvent,\n        target: target.current\n      };\n\n      if (props.onBlur) {\n        var focusEvent = __assign({}, ev);\n\n        props.onBlur.call(undefined, focusEvent);\n      }\n\n      closePopup(ev);\n    }\n  }, [focused, props.onBlur, isOpen, opened, onClose]);\n  var onWrapperMouseDown = React.useCallback(function () {\n    if (focused) {\n      // moving focus from treeview to dropdown triggers Focus and Blur events.\n      switchFocus(noop);\n    }\n  }, [focused]);\n  var changeValue = React.useCallback(function (event, newValue, hierarchicalIndex) {\n    if (props.onChange) {\n      var changeEvent = __assign({\n        value: newValue,\n        level: hierarchicalIndex ? toLevel(hierarchicalIndex) : []\n      }, event);\n\n      props.onChange.call(undefined, changeEvent);\n    }\n\n    if (!controlled) {\n      setStateValue(newValue);\n    }\n  }, [props.onChange, controlled]);\n  var onChange = React.useCallback(function (event) {\n    if (areSame(event.item, value, dataItemKey) || !target.current) {\n      return;\n    }\n\n    var item = event.item,\n        itemHierarchicalIndex = event.itemHierarchicalIndex,\n        nativeEvent = event.nativeEvent,\n        syntheticEvent = event.syntheticEvent;\n    var ev = {\n      syntheticEvent: syntheticEvent,\n      nativeEvent: nativeEvent,\n      target: target.current\n    };\n    changeValue(ev, item, itemHierarchicalIndex);\n    closePopup(ev);\n  }, [controlled, value, props.onChange, dataItemKey, isOpen, opened, onClose]);\n  var onClear = React.useCallback(function (event) {\n    if (!target.current) {\n      return;\n    }\n\n    var ev = {\n      syntheticEvent: event,\n      nativeEvent: event.nativeEvent,\n      target: target.current\n    };\n    changeValue(ev, null);\n    closePopup(ev);\n    event.preventDefault();\n  }, [controlled, props.onChange, isOpen, opened, onClose]);\n  var onExpand = React.useCallback(function (event) {\n    if (props.onExpandChange && target.current) {\n      var item = event.item,\n          itemHierarchicalIndex = event.itemHierarchicalIndex,\n          nativeEvent = event.nativeEvent,\n          syntheticEvent = event.syntheticEvent;\n      var expandEvent = {\n        level: toLevel(itemHierarchicalIndex),\n        item: item,\n        nativeEvent: nativeEvent,\n        syntheticEvent: syntheticEvent,\n        target: target.current\n      };\n      props.onExpandChange.call(undefined, expandEvent);\n    }\n  }, [props.onExpandChange]);\n  var onFilterChange = React.useCallback(function (event) {\n    if (props.onFilterChange && target.current) {\n      var filterDesc = {\n        field: props.textField,\n        operator: 'contains',\n        value: event.target.value\n      };\n      var ev = {\n        filter: filterDesc,\n        syntheticEvent: event,\n        nativeEvent: event.nativeEvent,\n        target: target.current\n      };\n      props.onFilterChange.call(undefined, ev);\n\n      if (props.filter === undefined) {\n        setFilter(event.target.value);\n      }\n    }\n  }, [props.onFilterChange, props.filter, props.textField]);\n  var treeViewData = React.useMemo(function () {\n    return controlled || !hasValue ? data : mapTree(data, subItemsField, function (item) {\n      var _a;\n\n      return extendDataItem(item, subItemsField, (_a = {}, _a[selectField] = areSame(item, value, dataItemKey), _a));\n    });\n  }, [data, value, controlled, hasValue, selectField, subItemsField]);\n  var NoData = props.listNoData || ListNoData;\n  var ValueComponent = props.valueHolder || ValueHolder;\n  var localization = useLocalization();\n  var isValid = !validityStyles || validity.valid;\n  var dropdowntree = React.createElement(\"span\", {\n    className: classNames('k-widget k-dropdowntree k-dropdowntree-clearable', props.className),\n    tabIndex: tabIndex,\n    accessKey: props.accessKey,\n    id: id,\n    style: label ? __assign({}, style, {\n      width: undefined\n    }) : style,\n    dir: dir,\n    ref: elementRef,\n    onKeyDown: disabled ? undefined : onWrapperKeyDown,\n    onMouseDown: onWrapperMouseDown,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    role: \"listbox\",\n    \"aria-haspopup\": \"true\",\n    \"aria-expanded\": isOpen,\n    \"aria-disabled\": disabled,\n    \"aria-label\": label,\n    \"aria-labelledby\": props.ariaLabelledBy,\n    \"aria-describedby\": props.ariaDescribedBy\n  }, React.createElement(\"span\", {\n    className: classNames('k-dropdown-wrap', {\n      'k-state-focused': focused,\n      'k-state-disabled': disabled,\n      'k-state-invalid': !isValid\n    }),\n    onClick: disabled ? undefined : onWrapperClick\n  }, React.createElement(\"span\", {\n    className: \"k-input\"\n  }, React.createElement(ValueComponent, {\n    item: value\n  }, currentValueText || placeholder)), hasValue && !disabled && React.createElement(\"span\", {\n    onClick: onClear,\n    className: \"k-icon k-clear-value k-i-close\",\n    title: localization.toLanguageString(clear, messages[clear]),\n    role: \"button\",\n    tabIndex: -1,\n    onMouseDown: function (e) {\n      return e.preventDefault();\n    }\n  }), React.createElement(\"span\", {\n    className: \"k-select\",\n    \"aria-label\": \"select\"\n  }, React.createElement(\"span\", {\n    className: classNames('k-icon', {\n      'k-i-arrow-60-down': !props.loading,\n      'k-i-loading': props.loading\n    })\n  })), React.createElement(\"select\", {\n    name: name,\n    ref: selectRef,\n    tabIndex: -1,\n    \"aria-hidden\": true,\n    title: label,\n    style: {\n      opacity: 0,\n      width: 1,\n      border: 0,\n      zIndex: -1,\n      position: 'absolute',\n      left: '50%'\n    }\n  }, React.createElement(\"option\", {\n    value: props.valueMap ? props.valueMap.call(undefined, value) : value\n  }))), React.createElement(Popup, {\n    className: classNames('k-list-container k-group k-reset k-popup-dropdowntree', popupSettings.className, {\n      'k-rtl': dir === 'rtl'\n    }),\n    style: popupStyles,\n    animate: popupSettings.animate,\n    anchor: elementRef.current,\n    show: isOpen,\n    onOpen: onPopupOpened,\n    onClose: onPopupClosed,\n    appendTo: popupSettings.appendTo\n  }, props.filterable && React.createElement(\"span\", {\n    className: \"k-list-filter\"\n  }, React.createElement(\"input\", {\n    className: \"k-textbox\",\n    tabIndex: tabIndex,\n    ref: inputRef,\n    value: props.filter === undefined ? filter : props.filter,\n    onChange: onFilterChange,\n    onKeyDown: onInputKeyDown\n  }), React.createElement(\"span\", {\n    className: \"k-icon k-i-zoom\"\n  })), data.length > 0 ? React.createElement(TreeView, {\n    ref: treeViewRef,\n    tabIndex: tabIndex,\n    data: treeViewData,\n    focusIdField: dataItemKey,\n    textField: props.textField,\n    selectField: selectField,\n    expandField: props.expandField,\n    childrenField: subItemsField,\n    expandIcons: true,\n    onItemClick: onChange,\n    onExpandChange: onExpand,\n    item: props.item\n  }) : React.createElement(NoData, null, localization.toLanguageString(nodata, messages[nodata]))));\n  return label ? React.createElement(FloatingLabel, {\n    label: label,\n    editorValue: currentValueText,\n    editorPlaceholder: placeholder,\n    editorValid: isValid,\n    editorDisabled: disabled,\n    editorId: id,\n    style: {\n      width: style ? style.width : undefined\n    },\n    children: dropdowntree,\n    dir: dir\n  }) : dropdowntree;\n});\nvar propTypes = {\n  opened: PropTypes.bool,\n  disabled: PropTypes.bool,\n  dir: PropTypes.string,\n  tabIndex: PropTypes.number,\n  accessKey: PropTypes.string,\n  data: PropTypes.array,\n  value: PropTypes.any,\n  valueMap: PropTypes.func,\n  placeholder: PropTypes.string,\n  dataItemKey: PropTypes.string.isRequired,\n  textField: PropTypes.string.isRequired,\n  selectField: PropTypes.string,\n  expandField: PropTypes.string,\n  subItemsField: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  label: PropTypes.string,\n  validationMessage: PropTypes.string,\n  validityStyles: PropTypes.bool,\n  valid: PropTypes.bool,\n  required: PropTypes.bool,\n  name: PropTypes.string,\n  id: PropTypes.string,\n  ariaLabelledBy: PropTypes.string,\n  ariaDescribedBy: PropTypes.string,\n  filterable: PropTypes.bool,\n  filter: PropTypes.string,\n  loading: PropTypes.bool,\n  popupSettings: PropTypes.shape({\n    animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n      openDuration: PropTypes.number,\n      closeDuration: PropTypes.number\n    })]),\n    className: PropTypes.string,\n    appendTo: PropTypes.any,\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  }),\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  onFilterChange: PropTypes.func,\n  onExpandChange: PropTypes.func,\n  item: PropTypes.func,\n  valueHolder: PropTypes.func,\n  listNoData: PropTypes.func\n};\nDropDownTree.displayName = 'KendoReactDropDownTree';\nDropDownTree.propTypes = propTypes;","map":{"version":3,"sources":["../../../src/DropDownTree/DropDownTree.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,OAAO,KAAK,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAK,SAAZ,MAA2B,YAA3B;AACA,SACI,UADJ,EAEI,IAFJ,EAGI,MAHJ,EAII,WAJJ,EAKI,IALJ,EAMI,OANJ,EAOI,cAPJ,EAQI,IARJ,QASO,8BATP;AAUA,SAAS,KAAT,QAAsB,6BAAtB;AACA,SAAS,eAAT,QAAgC,4BAAhC;AACA,SAAS,QAAT,QAA4E,gCAA5E;AAEA,SAAS,eAAT,QAAgC,8BAAhC;AACA,SAAS,eAAT,QAAgC,uBAAhC;AAQA,SAAS,YAAT,EAAuB,OAAvB,EAAgC,SAAhC,QAAiD,iBAAjD;AACA,SAAS,gBAAT,QAAiC,oBAAjC;AACA,SAAS,UAAT,QAA2B,cAA3B;AAEA,SAAS,QAAT,EAAmB,KAAnB,EAA0B,MAA1B,QAAwC,eAAxC;AACA,SAAS,aAAT,QAA8B,8BAA9B;AAEA,IAAM,kBAAkB,GAAW,sCAAnC;;AACA,IAAM,WAAW,GAA8C,UAAA,KAAA,EAAK;AAAI,SAAA,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EAAG,KAAK,CAAR,QAAA,CAAA;AAAqB,CAA7F;;AAEA,IAAM,OAAO,GAAG,UAAC,iBAAD,EAA0B;AACtC,SAAA,iBAAiB,CAAC,KAAlB,CAAwB,GAAxB,EAA6B,GAA7B,CAAiC,UAAA,CAAA,EAAC;AAAI,WAAA,QAAQ,CAAC,CAAD,EAAR,EAAQ,CAAR;AAAe,GAArD,CAAA;AAAsD,CAD1D;;AAGA,IAAM,WAAW,GAAG,UAAC,EAAD,EAAyC,QAAzC,EAAiD;MAA9C,iBAAA,GAAA,EAAA,CAAA,iB;MAAmB,KAAA,GAAA,EAAA,CAAA,K;MAAO,QAAA,GAAA,EAAA,CAAA,Q;AAAyB,SAAC;AACvE,IAAA,WAAW,EAAE,iBAAiB,KAAK,SADoC;AAEvE,IAAA,KAAK,EAAE,OAAO,CAAC,KAAK,KAAK,SAAV,GAAsB,KAAtB,GAA+B,CAAC,QAAD,IAAa,QAA7C,CAFyD;AAGvE,IAAA,YAAY,EAAE,CAAC;AAHwD,GAAD;AAIxE,CAJF;;AAMA,IAAM,YAAY,GAAG;AACjB,EAAA,WAAW,EAAE,UADI;AAEjB,EAAA,aAAa,EAAE,OAFE;AAGjB,EAAA,aAAa,EAAE;AACX,IAAA,OAAO,EAAE,IADE;AAEX,IAAA,KAAK,EAAE,OAFI;AAGX,IAAA,MAAM,EAAE;AAHG,GAHE;AAQjB,EAAA,QAAQ,EAAE,KARO;AASjB,EAAA,cAAc,EAAE;AATC,CAArB;AAYA;;AAEG;;AACH,OAAO,IAAM,YAAY,GAAG,KAAK,CAAC,UAAN,CAA+D,UAAC,KAAD,EAAQ,GAAR,EAAW;AAClG,EAAA,eAAe,CAAC,eAAD,CAAf;AAEA,MAAM,YAAY,GAAG,KAAK,CAAC,OAAN,CAAc,YAAA;AAAM,WAAA,IAAA,EAAA;AAAM,GAA1B,EAA4B,EAA5B,CAArB;AACA,MAAM,EAAE,GAAW,KAAK,CAAC,EAAN,IAAY,YAA/B;AAGI,MAAA,EAAA,GAAA,KAAA,CAAA,IAAA;AAAA,MAAA,IAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,EAAA;AAAA,MAAW,WAAA,GAAA,KAAA,CAAA,WAAX;AAAA,MAAwB,EAAA,GAAA,KAAA,CAAA,aAAxB;AAAA,MAAwB,aAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,EAAxB;AAAA,MAA4C,EAAA,GAAA,KAAA,CAAA,KAA5C;AAAA,MAA4C,KAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,EAA5C;AAAA,MACA,MAAA,GAAA,KAAA,CAAA,MADA;AAAA,MACQ,QAAA,GAAA,KAAA,CAAA,QADR;AAAA,MACkB,EAAA,GAAA,KAAA,CAAA,MADlB;AAAA,MACkB,MAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GAAA,IAAA,GAAA,EADlB;AAAA,MACiC,EAAA,GAAA,KAAA,CAAA,OADjC;AAAA,MACiC,OAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GAAA,IAAA,GAAA,EADjC;AAAA,MAEA,WAAA,GAAA,KAAA,CAAA,WAFA;AAAA,MAEa,KAAA,GAAA,KAAA,CAAA,KAFb;AAAA,MAEoB,IAAA,GAAA,KAAA,CAAA,IAFpB;AAAA,MAE0B,EAAA,GAAA,KAAA,CAAA,WAF1B;AAAA,MAE0B,WAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GAAA,YAAA,CAAA,WAAA,GAAA,EAF1B;AAAA,MAGA,EAAA,GAAA,KAAA,CAAA,aAHA;AAAA,MAGA,aAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GAAA,YAAA,CAAA,aAAA,GAAA,EAHA;AAAA,MAIA,iBAAA,GAAA,KAAA,CAAA,iBAJA;AAAA,MAImB,KAAA,GAAA,KAAA,CAAA,KAJnB;AAAA,MAKA,EAAA,GAAA,KAAA,CAAA,QALA;AAAA,MAKA,QAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GAAA,YAAA,CAAA,QAAA,GAAA,EALA;AAAA,MAKkC,EAAA,GAAA,KAAA,CAAA,cALlC;AAAA,MAKkC,cAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GAAA,YAAA,CAAA,cAAA,GAAA,EALlC;AAQJ,MAAM,QAAQ,GAAG,WAAW,CAAC,KAAK,CAAC,QAAP,EAAiB,QAAjB,CAA5B;AAEA,MAAM,MAAM,GAAG,KAAK,CAAC,MAAN,CAAiC,IAAjC,CAAf;AACA,MAAM,UAAU,GAAG,KAAK,CAAC,MAAN,CAA8B,IAA9B,CAAnB;AACA,MAAM,QAAQ,GAAG,KAAK,CAAC,MAAN,CAA+B,IAA/B,CAAjB;AACA,MAAM,SAAS,GAAG,KAAK,CAAC,MAAN,CAAgC,IAAhC,CAAlB;AACA,MAAM,WAAW,GAAG,KAAK,CAAC,MAAN,CAAuB,IAAvB,CAApB;AACA,MAAM,YAAY,GAAG,KAAK,CAAC,MAAN,CAAsB,KAAtB,CAArB;;AAEM,MAAA,EAAA,GAAA,KAAA,CAAA,QAAA,CAAA,SAAA,CAAA;AAAA,MAAE,UAAA,GAAA,EAAA,CAAA,CAAA,CAAF;AAAA,MAAc,aAAA,GAAA,EAAA,CAAA,CAAA,CAAd;;AACN,MAAM,UAAU,GAAG,KAAK,CAAC,KAAN,KAAgB,SAAnC;AACA,MAAM,KAAK,GAAG,UAAU,GAAG,KAAK,CAAC,KAAT,GAAkB,UAAU,KAAK,SAAf,GAA2B,UAA3B,GAAwC,KAAK,CAAC,YAAxF;AACA,MAAM,QAAQ,GAAG,SAAS,CAAC,KAAD,CAA1B;AACA,MAAM,gBAAgB,GAAG,QAAQ,GAAG,YAAY,CAAC,KAAD,EAAQ,KAAK,CAAC,SAAd,CAAf,GAA0C,EAA3E;AACA,MAAM,QAAQ,GAAG,WAAW,CAAC;AAAE,IAAA,iBAAiB,EAAA,iBAAnB;AAAqB,IAAA,KAAK,EAAA,KAA1B;AAA4B,IAAA,QAAQ,EAAA;AAApC,GAAD,EAAyC,QAAzC,CAA5B;AAEA,MAAM,KAAK,GAAG,KAAK,CAAC,WAAN,CAAkB,YAAA;AAAM,WAAA,UAAU,CAAC,OAAX,IAAsB,UAAU,CAAC,OAAX,CAAtB,KAAsB,EAAtB;AAAgD,GAAxE,EAA0E,EAA1E,CAAd;AAEA,EAAA,KAAK,CAAC,mBAAN,CACI,MADJ,EAEI,YAAA;AAAM,WAAC;AACH,MAAA,KAAK,EAAA,KADF;AAEH,MAAA,OAAO,EAAE,UAAU,CAAC,OAFjB;AAGH,MAAA,aAAa,EAAE,UAAU,CAAC,OAHvB;AAIH,MAAA,KAAK,EAAA;AAJF,KAAD;AAKJ,GAPN;AAUA,EAAA,KAAK,CAAC,mBAAN,CAA0B,GAA1B,EAA+B,YAAA;AAAM,WAAA,MAAM,CAAN,OAAA;AAAc,GAAnD;AAEA,MAAM,GAAG,GAAG,MAAM,CAAC,UAAD,EAAa,KAAK,CAAC,GAAnB,CAAlB;AACA,MAAM,iBAAiB,GAAG,aAAa,CAAC,KAAd,KAAwB,SAAxB,GACtB,aAAa,CAAC,KADQ,GACC,KAAK,CAAC,KAAN,KAAgB,SAAhB,GAA4B,KAAK,CAAC,KAAlC,GAA0C,YAAY,CAAC,aAAb,CAA2B,KADhG;AAEA,MAAM,UAAU,GAAG,gBAAgB,CAAC,UAAD,EAAa,iBAAb,CAAnC;;AACA,MAAM,WAAW,GAAA,QAAA,CAAA;AACb,IAAA,KAAK,EAAE;AADM,GAAA,EAET,GAAG,KAAK,SAAR,GAAoB;AAAE,IAAA,SAAS,EAAG;AAAd,GAApB,GAAkD,EAFzC,CAAjB;;AAKM,MAAA,EAAA,GAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA;AAAA,MAAC,IAAA,GAAA,EAAA,CAAA,CAAA,CAAD;AAAA,MAAO,OAAA,GAAA,EAAA,CAAA,CAAA,CAAP;;AACN,MAAM,MAAM,GAAG,MAAM,KAAK,SAAX,GAAuB,MAAvB,GAAgC,IAA/C;;AAEM,MAAA,EAAA,GAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA;AAAA,MAAC,OAAA,GAAA,EAAA,CAAA,CAAA,CAAD;AAAA,MAAU,UAAA,GAAA,EAAA,CAAA,CAAA,CAAV;;AAEA,MAAA,EAAA,GAAA,KAAA,CAAA,QAAA,CAAA,EAAA,CAAA;AAAA,MAAC,MAAA,GAAA,EAAA,CAAA,CAAA,CAAD;AAAA,MAAS,SAAA,GAAA,EAAA,CAAA,CAAA,CAAT;;AAEN,MAAM,WAAW,GAAG,KAAK,CAAC,WAAN,CAChB,YAAA;AACI,QAAI,SAAS,CAAC,OAAV,IAAqB,SAAS,CAAC,OAAV,CAAkB,iBAA3C,EAA8D;AAC1D,MAAA,SAAS,CAAC,OAAV,CAAkB,iBAAlB,CACI,QAAQ,CAAC,KAAT,GACM,EADN,GAEM,iBAAiB,KAAK,SAAtB,GAAkC,kBAAlC,GAAuD,iBAHjE;AAKH;AACJ,GATe,EAUhB,CAAC,iBAAD,EAAoB,QAApB,CAVgB,CAApB;AAaA,EAAA,KAAK,CAAC,SAAN,CAAgB,WAAhB;AAEA,MAAM,SAAS,GAAG,KAAK,CAAC,WAAN,CACd,UAAC,KAAD,EAAyC;AACrC,QAAI,CAAC,MAAL,EAAa;AACT,UAAI,MAAJ,EAAY;AACR,YAAM,SAAS,GAAA,QAAA,CAAA,EAAA,EAA+B,KAA/B,CAAf;;AACA,QAAA,MAAM,CAAC,IAAP,CAAY,SAAZ,EAAuB,SAAvB;AACH;;AACD,UAAI,MAAM,KAAK,SAAf,EAA0B;AACtB,QAAA,OAAO,CAAC,IAAD,CAAP;AACH;AACJ;AACJ,GAXa,EAYd,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,CAZc,CAAlB;AAeA,MAAM,UAAU,GAAG,KAAK,CAAC,WAAN,CACf,UAAC,KAAD,EAAyC;AACrC,QAAI,MAAJ,EAAY;AACR,UAAI,OAAJ,EAAa;AACT,YAAM,UAAU,GAAA,QAAA,CAAA,EAAA,EAAgC,KAAhC,CAAhB;;AACA,QAAA,OAAO,CAAC,IAAR,CAAa,SAAb,EAAwB,UAAxB;AACH;;AACD,UAAI,MAAM,KAAK,SAAf,EAA0B;AACtB,QAAA,OAAO,CAAC,KAAD,CAAP;AACH;AACJ;AACJ,GAXc,EAYf,CAAC,MAAD,EAAS,MAAT,EAAiB,OAAjB,CAZe,CAAnB;AAeA,MAAM,cAAc,GAAG,KAAK,CAAC,WAAN,CACnB,UAAC,KAAD,EAAqD;AACjD,QAAI,CAAC,KAAK,CAAC,kBAAN,EAAD,IAA+B,MAAM,CAAC,OAA1C,EAAmD;AAC/C,MAAA,UAAU,CAAC,IAAD,CAAV;AACA,UAAM,EAAE,GAAsC;AAC1C,QAAA,cAAc,EAAE,KAD0B;AAE1C,QAAA,WAAW,EAAE,KAAK,CAAC,WAFuB;AAG1C,QAAA,MAAM,EAAE,MAAM,CAAC;AAH2B,OAA9C;AAKA,OAAC,MAAM,GAAG,UAAH,GAAgB,SAAvB,EAAkC,EAAlC;AACH;AACJ,GAXkB,EAYnB,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,EAAyB,OAAzB,CAZmB,CAAvB;AAeA,MAAM,WAAW,GAAG,KAAK,CAAC,WAAN,CAChB,UAAC,OAAD,EAAoB;AAChB,IAAA,YAAY,CAAC,OAAb,GAAuB,IAAvB;AACA,IAAA,OAAO;AACP,IAAA,MAAM,CAAC,UAAP,CAAkB,YAAA;AAAM,aAAA,YAAY,CAAC,OAAb,GAAA,KAAA;AAA4B,KAApD,EAAsD,CAAtD;AACH,GALe,EAMhB,EANgB,CAApB;AASA,MAAM,gBAAgB,GAAG,KAAK,CAAC,WAAN,CACrB,UAAC,KAAD,EAA4C;AAChC,QAAA,OAAA,GAAA,KAAA,CAAA,OAAA;AAAA,QAAS,MAAA,GAAA,KAAA,CAAA,MAAT;AACR,QAAM,QAAQ,GAAG,WAAW,CAAC,OAAZ,IAAuB,WAAW,CAAC,OAAZ,CAAoB,OAA5D;;AAEA,QAAI,CAAC,MAAM,CAAC,OAAR,IAAoB,KAAK,CAAC,kBAAN,MAA8B,QAAQ,CAAC,OAAT,KAAqB,KAAK,CAAC,MAAjF,EAA0F;AACtF;AACH;;AAED,QAAM,EAAE,GAAsC;AAC1C,MAAA,cAAc,EAAE,KAD0B;AAE1C,MAAA,WAAW,EAAE,KAAK,CAAC,WAFuB;AAG1C,MAAA,MAAM,EAAE,MAAM,CAAC;AAH2B,KAA9C;;AAMA,QAAI,MAAJ,EAAY;AACR,UAAI,OAAO,KAAK,IAAI,CAAC,GAAjB,IAAyB,MAAM,IAAI,OAAO,KAAK,IAAI,CAAC,EAAxD,EAA6D;AACzD,QAAA,UAAU,CAAC,EAAD,CAAV;AACH,OAFD,MAEO,IAAI,QAAQ,IAAI,QAAQ,CAAC,aAAT,CAAuB,kBAAvB,CAAZ,KACN,OAAO,KAAK,IAAI,CAAC,EAAjB,IAAuB,OAAO,KAAK,IAAI,CAAC,IAAxC,IACD,OAAO,KAAK,IAAI,CAAC,IADhB,IACwB,OAAO,KAAK,IAAI,CAAC,KADzC,IAED,OAAO,KAAK,IAAI,CAAC,IAFhB,IAEwB,OAAO,KAAK,IAAI,CAAC,GAHnC,CAAJ,EAG6C;AAChD,YAAI,OAAO,KAAK,IAAI,CAAC,EAAjB,IAAuB,QAAQ,CAAC,OAApC,EAA6C;AACzC,cAAM,KAAK,GAAG,KAAK,CAAC,IAAN,CAAW,QAAQ,CAAC,gBAAT,CAA0B,kBAA1B,CAAX,CAAd;AACA,cAAM,WAAW,GAAO,KAAK,CAAA,KAAL,GAAO,OAAP,GAAiB,IAAjB,CAAsB,UAAA,CAAA,EAAC;AAAI,mBAAA,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,aAAF,CAAb,kBAAa,CAAN,CAAP;AAAiD,WAA5E,CAAxB;;AACA,cAAI,WAAW,IAAI,KAAK,CAAC,OAAN,CAAc,WAAd,MAA+B,CAAlD,EAAqD;AACjD,mBAAO,WAAW,CAAC,YAAA;AAAQ,cAAA,YAAY,CAAC,QAAQ,CAAC,OAAV,CAAZ;AAAiC,aAA1C,CAAlB;AACH;AACJ;;AACD,QAAA,WAAW,CAAC,IAAD,CAAX;AACH,OAZM,MAYA,IAAI,OAAO,KAAK,IAAI,CAAC,IAArB,EAA2B;AAC9B,QAAA,WAAW,CAAC,YAAA;AAAQ,UAAA,YAAY,CAAC,QAAQ,CAAC,OAAT,IAAoB,QAArB,CAAZ;AAA6C,SAAtD,CAAX;AACH;AACJ,KAlBD,MAkBO;AACH,UAAI,MAAM,IAAI,OAAO,KAAK,IAAI,CAAC,IAA/B,EAAqC;AACjC,QAAA,SAAS,CAAC,EAAD,CAAT;AACH;AACJ;AACJ,GAtCoB,EAuCrB,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,EAAyB,OAAzB,CAvCqB,CAAzB;AA0CA,MAAM,cAAc,GAAG,KAAK,CAAC,WAAN,CACnB,UAAC,KAAD,EAA4C;AAChC,QAAA,OAAA,GAAA,KAAA,CAAA,OAAA;AAAA,QAAS,MAAA,GAAA,KAAA,CAAA,MAAT;;AACR,QAAI,MAAM,IAAK,OAAO,KAAK,IAAI,CAAC,EAAjB,IAAuB,OAAO,KAAK,IAAI,CAAC,IAAvD,EAA8D;AAC1D;AACH;;AAED,IAAA,KAAK,CAAC,cAAN;AACA,IAAA,WAAW,CACP,OAAO,KAAK,IAAI,CAAC,EAAjB,GACI,YAAA;AAAQ,MAAA,YAAY,CAAC,UAAU,CAAC,OAAZ,CAAZ;AAAmC,KAD/C,GAEI,YAAA;AAAQ,MAAA,YAAY,CAAC,WAAW,CAAC,OAAZ,IAAuB,WAAW,CAAC,OAAZ,CAAoB,OAA5C,CAAZ;AAAmE,KAHxE,CAAX;AAKH,GAbkB,EAcnB,EAdmB,CAAvB;AAiBA,MAAM,YAAY,GAAG,KAAK,CAAC,WAAN,CACjB,UAAC,OAAD,EAA4B;AACxB,QAAI,OAAJ,EAAa;AACT,MAAA,WAAW,CAAC,YAAA;AAAM,eAAA,OAAO,CAAP,KAAA,EAAA;AAAe,OAAtB,CAAX;AACH;AACJ,GALgB,EAMjB,EANiB,CAArB;AASA,MAAM,aAAa,GAAG,KAAK,CAAC,WAAN,CAClB,YAAA;AACI,QAAI,CAAC,OAAD,IAAY,MAAhB,EAAwB;AACpB,MAAA,UAAU,CAAC;AAAE,QAAA,MAAM,EAAE,MAAM,CAAC;AAAjB,OAAD,CAAV;AACH,KAFD,MAEO;AACH,UAAI,KAAK,CAAC,UAAV,EAAsB;AAClB,QAAA,YAAY,CAAC,QAAQ,CAAC,OAAV,CAAZ;AACH,OAFD,MAEO;AACH,QAAA,YAAY,CAAC,WAAW,CAAC,OAAZ,IAAuB,WAAW,CAAC,OAAZ,CAAoB,OAA5C,CAAZ;AACH;AACJ;AACJ,GAXiB,EAYlB,CAAC,OAAD,EAAU,KAAK,CAAC,UAAhB,EAA4B,OAA5B,EAAqC,MAArC,EAA6C,MAA7C,CAZkB,CAAtB;AAeA,MAAM,aAAa,GAAG,KAAK,CAAC,WAAN,CAClB,YAAA;AACI,QAAI,OAAJ,EAAa;AACT;AACA,MAAA,YAAY,CAAC,UAAU,CAAC,OAAZ,CAAZ;AACH;AACJ,GANiB,EAOlB,CAAC,OAAD,CAPkB,CAAtB;AAUA,MAAM,OAAO,GAAG,KAAK,CAAC,WAAN,CACZ,UAAC,KAAD,EAAyC;AACrC,QAAI,CAAC,OAAD,IAAY,CAAC,YAAY,CAAC,OAA9B,EAAuC;AACnC,MAAA,UAAU,CAAC,IAAD,CAAV;;AACA,UAAI,KAAK,CAAC,OAAN,IAAiB,MAAM,CAAC,OAA5B,EAAqC;AACjC,YAAM,UAAU,GAA2B;AACvC,UAAA,cAAc,EAAE,KADuB;AAEvC,UAAA,WAAW,EAAE,KAAK,CAAC,WAFoB;AAGvC,UAAA,MAAM,EAAE,MAAM,CAAC;AAHwB,SAA3C;AAKA,QAAA,KAAK,CAAC,OAAN,CAAc,IAAd,CAAmB,SAAnB,EAA8B,UAA9B;AACH;AACJ;AACJ,GAbW,EAcZ,CAAC,OAAD,EAAU,KAAK,CAAC,OAAhB,CAdY,CAAhB;AAiBA,MAAM,MAAM,GAAG,KAAK,CAAC,WAAN,CACX,UAAC,KAAD,EAAyC;AACrC,QAAI,OAAO,IAAI,CAAC,YAAY,CAAC,OAAzB,IAAoC,MAAM,CAAC,OAA/C,EAAwD;AACpD,MAAA,UAAU,CAAC,KAAD,CAAV;AACA,UAAM,EAAE,GAAsC;AAC1C,QAAA,cAAc,EAAE,KAD0B;AAE1C,QAAA,WAAW,EAAE,KAAK,CAAC,WAFuB;AAG1C,QAAA,MAAM,EAAE,MAAM,CAAC;AAH2B,OAA9C;;AAMA,UAAI,KAAK,CAAC,MAAV,EAAkB;AACd,YAAM,UAAU,GAAA,QAAA,CAAA,EAAA,EAA+B,EAA/B,CAAhB;;AACA,QAAA,KAAK,CAAC,MAAN,CAAa,IAAb,CAAkB,SAAlB,EAA6B,UAA7B;AACH;;AACD,MAAA,UAAU,CAAC,EAAD,CAAV;AACH;AACJ,GAhBU,EAiBX,CAAC,OAAD,EAAU,KAAK,CAAC,MAAhB,EAAwB,MAAxB,EAAgC,MAAhC,EAAwC,OAAxC,CAjBW,CAAf;AAoBA,MAAM,kBAAkB,GAAG,KAAK,CAAC,WAAN,CACvB,YAAA;AACI,QAAI,OAAJ,EAAa;AACT;AACA,MAAA,WAAW,CAAC,IAAD,CAAX;AACH;AACJ,GANsB,EAOvB,CAAC,OAAD,CAPuB,CAA3B;AAUA,MAAM,WAAW,GAAG,KAAK,CAAC,WAAN,CAChB,UAAC,KAAD,EAA2C,QAA3C,EAA0D,iBAA1D,EAAoF;AAChF,QAAI,KAAK,CAAC,QAAV,EAAoB;AAChB,UAAM,WAAW,GAAA,QAAA,CAAA;AACb,QAAA,KAAK,EAAE,QADM;AAEb,QAAA,KAAK,EAAE,iBAAiB,GAAG,OAAO,CAAC,iBAAD,CAAV,GAAgC;AAF3C,OAAA,EAGV,KAHU,CAAjB;;AAKA,MAAA,KAAK,CAAC,QAAN,CAAe,IAAf,CAAoB,SAApB,EAA+B,WAA/B;AACH;;AAED,QAAI,CAAC,UAAL,EAAiB;AACb,MAAA,aAAa,CAAC,QAAD,CAAb;AACH;AACJ,GAde,EAehB,CAAC,KAAK,CAAC,QAAP,EAAiB,UAAjB,CAfgB,CAApB;AAkBA,MAAM,QAAQ,GAAG,KAAK,CAAC,WAAN,CACb,UAAC,KAAD,EAA8B;AAC1B,QAAI,OAAO,CAAC,KAAK,CAAC,IAAP,EAAa,KAAb,EAAoB,WAApB,CAAP,IAA2C,CAAC,MAAM,CAAC,OAAvD,EAAgE;AAC5D;AACH;;AACO,QAAA,IAAA,GAAA,KAAA,CAAA,IAAA;AAAA,QAAM,qBAAA,GAAA,KAAA,CAAA,qBAAN;AAAA,QAA6B,WAAA,GAAA,KAAA,CAAA,WAA7B;AAAA,QAA0C,cAAA,GAAA,KAAA,CAAA,cAA1C;AACR,QAAM,EAAE,GAAsC;AAC1C,MAAA,cAAc,EAAA,cAD4B;AAE1C,MAAA,WAAW,EAAE,WAF6B;AAG1C,MAAA,MAAM,EAAE,MAAM,CAAC;AAH2B,KAA9C;AAMA,IAAA,WAAW,CAAC,EAAD,EAAK,IAAL,EAAW,qBAAX,CAAX;AACA,IAAA,UAAU,CAAC,EAAD,CAAV;AACH,GAdY,EAeb,CAAC,UAAD,EAAa,KAAb,EAAoB,KAAK,CAAC,QAA1B,EAAoC,WAApC,EAAiD,MAAjD,EAAyD,MAAzD,EAAiE,OAAjE,CAfa,CAAjB;AAkBA,MAAM,OAAO,GAAG,KAAK,CAAC,WAAN,CACZ,UAAC,KAAD,EAAqD;AACjD,QAAI,CAAC,MAAM,CAAC,OAAZ,EAAqB;AACjB;AACH;;AACD,QAAM,EAAE,GAAsC;AAC1C,MAAA,cAAc,EAAE,KAD0B;AAE1C,MAAA,WAAW,EAAE,KAAK,CAAC,WAFuB;AAG1C,MAAA,MAAM,EAAE,MAAM,CAAC;AAH2B,KAA9C;AAMA,IAAA,WAAW,CAAC,EAAD,EAAK,IAAL,CAAX;AACA,IAAA,UAAU,CAAC,EAAD,CAAV;AAEA,IAAA,KAAK,CAAC,cAAN;AACH,GAfW,EAgBZ,CAAC,UAAD,EAAa,KAAK,CAAC,QAAnB,EAA6B,MAA7B,EAAqC,MAArC,EAA6C,OAA7C,CAhBY,CAAhB;AAmBA,MAAM,QAAQ,GAAG,KAAK,CAAC,WAAN,CACb,UAAC,KAAD,EAAiC;AAC7B,QAAI,KAAK,CAAC,cAAN,IAAwB,MAAM,CAAC,OAAnC,EAA4C;AAChC,UAAA,IAAA,GAAA,KAAA,CAAA,IAAA;AAAA,UAAM,qBAAA,GAAA,KAAA,CAAA,qBAAN;AAAA,UAA6B,WAAA,GAAA,KAAA,CAAA,WAA7B;AAAA,UAA0C,cAAA,GAAA,KAAA,CAAA,cAA1C;AACR,UAAM,WAAW,GAA4B;AACzC,QAAA,KAAK,EAAE,OAAO,CAAC,qBAAD,CAD2B;AAEzC,QAAA,IAAI,EAAA,IAFqC;AAEnC,QAAA,WAAW,EAAA,WAFwB;AAEtB,QAAA,cAAc,EAAA,cAFQ;AAEN,QAAA,MAAM,EAAE,MAAM,CAAC;AAFT,OAA7C;AAIA,MAAA,KAAK,CAAC,cAAN,CAAqB,IAArB,CAA0B,SAA1B,EAAqC,WAArC;AACH;AACJ,GAVY,EAWb,CAAC,KAAK,CAAC,cAAP,CAXa,CAAjB;AAcA,MAAM,cAAc,GAAG,KAAK,CAAC,WAAN,CACnB,UAAC,KAAD,EAA2C;AACvC,QAAI,KAAK,CAAC,cAAN,IAAwB,MAAM,CAAC,OAAnC,EAA4C;AACxC,UAAM,UAAU,GAAqB;AAAE,QAAA,KAAK,EAAE,KAAK,CAAC,SAAf;AAA0B,QAAA,QAAQ,EAAE,UAApC;AAAgD,QAAA,KAAK,EAAE,KAAK,CAAC,MAAN,CAAa;AAApE,OAArC;AACA,UAAM,EAAE,GAAkC;AACtC,QAAA,MAAM,EAAE,UAD8B;AAEtC,QAAA,cAAc,EAAE,KAFsB;AAGtC,QAAA,WAAW,EAAE,KAAK,CAAC,WAHmB;AAItC,QAAA,MAAM,EAAE,MAAM,CAAC;AAJuB,OAA1C;AAMA,MAAA,KAAK,CAAC,cAAN,CAAqB,IAArB,CAA0B,SAA1B,EAAqC,EAArC;;AACA,UAAI,KAAK,CAAC,MAAN,KAAiB,SAArB,EAAgC;AAC5B,QAAA,SAAS,CAAC,KAAK,CAAC,MAAN,CAAa,KAAd,CAAT;AACH;AACJ;AACJ,GAfkB,EAgBnB,CAAC,KAAK,CAAC,cAAP,EAAuB,KAAK,CAAC,MAA7B,EAAqC,KAAK,CAAC,SAA3C,CAhBmB,CAAvB;AAmBA,MAAM,YAAY,GAAG,KAAK,CAAC,OAAN,CACjB,YAAA;AACI,WAAQ,UAAU,IAAI,CAAC,QAAhB,GAA4B,IAA5B,GACH,OAAO,CACH,IADG,EAEH,aAFG,EAGH,UAAA,IAAA,EAAI;;;AAAI,aAAA,cAAc,CAClB,IADkB,EAElB,aAFkB,GAEL,EAAA,GAAA,EAAA,EACX,EAAA,CAAC,WAAD,CAAA,GAAe,OAAO,CAAC,IAAD,EAAO,KAAP,EAAc,WAAd,CADX,EACqC,EAHhC,EAAd;AAIP,KAPE,CADX;AAUH,GAZgB,EAajB,CAAC,IAAD,EAAO,KAAP,EAAc,UAAd,EAA0B,QAA1B,EAAoC,WAApC,EAAiD,aAAjD,CAbiB,CAArB;AAeA,MAAM,MAAM,GAAG,KAAK,CAAC,UAAN,IAAoB,UAAnC;AACA,MAAM,cAAc,GAAG,KAAK,CAAC,WAAN,IAAqB,WAA5C;AACA,MAAM,YAAY,GAAG,eAAe,EAApC;AACA,MAAM,OAAO,GAAG,CAAC,cAAD,IAAmB,QAAQ,CAAC,KAA5C;AAEA,MAAM,YAAY,GAChB,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,SAAS,EAAE,UAAU,CAAC,kDAAD,EAAqD,KAAK,CAAC,SAA3D,CADvB;AAEE,IAAA,QAAQ,EAAE,QAFZ;AAGE,IAAA,SAAS,EAAE,KAAK,CAAC,SAHnB;AAIE,IAAA,EAAE,EAAE,EAJN;AAKE,IAAA,KAAK,EAAE,KAAK,GAAE,QAAA,CAAA,EAAA,EAAM,KAAN,EAAW;AAAE,MAAA,KAAK,EAAE;AAAT,KAAX,CAAF,GAAoC,KALlD;AAME,IAAA,GAAG,EAAE,GANP;AAOE,IAAA,GAAG,EAAE,UAPP;AAQE,IAAA,SAAS,EAAE,QAAQ,GAAG,SAAH,GAAe,gBARpC;AASE,IAAA,WAAW,EAAE,kBATf;AAUE,IAAA,OAAO,EAAE,OAVX;AAWE,IAAA,MAAM,EAAE,MAXV;AAaE,IAAA,IAAI,EAAC,SAbP;AAagB,qBACA,MAdhB;AAcsB,qBACL,MAfjB;AAeuB,qBACN,QAhBjB;AAgByB,kBACX,KAjBd;AAiBmB,uBACA,KAAK,CAAC,cAlBzB;AAkBuC,wBACnB,KAAK,CAAC;AAnB1B,GAAA,EAqBE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,SAAS,EAAE,UAAU,CAAC,iBAAD,EAAoB;AAC/B,yBAAmB,OADY;AAE/B,0BAAoB,QAFW;AAG/B,yBAAmB,CAAC;AAHW,KAApB,CADvB;AAME,IAAA,OAAO,EAAE,QAAQ,GAAG,SAAH,GAAe;AANlC,GAAA,EAQE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe;AAAC,IAAA,IAAI,EAAE;AAAP,GAAf,EAA8B,gBAAgB,IAAI,WAAlD,CADF,CARF,EAWG,QAAQ,IAAI,CAAC,QAAb,IACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,OAAO,EAAE,OADX;AAEE,IAAA,SAAS,EAAC,gCAFZ;AAGE,IAAA,KAAK,EAAE,YAAY,CAAC,gBAAb,CAA8B,KAA9B,EAAqC,QAAQ,CAAC,KAAD,CAA7C,CAHT;AAIE,IAAA,IAAI,EAAC,QAJP;AAKE,IAAA,QAAQ,EAAE,CAAC,CALb;AAME,IAAA,WAAW,EAAE,UAAA,CAAA,EAAC;AAAI,aAAA,CAAC,CAAD,cAAA,EAAA;AAAkB;AANtC,GAAA,CAZJ,EAqBE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC,UAAhB;AAA0B,kBAAY;AAAtC,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAE,UAAU,CAAC,QAAD,EAAW;AAAE,2BAAqB,CAAC,KAAK,CAAC,OAA9B;AAAuC,qBAAe,KAAK,CAAC;AAA5D,KAAX;AAA3B,GAAA,CADF,CArBF,EAyBE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AACE,IAAA,IAAI,EAAE,IADR;AAEE,IAAA,GAAG,EAAE,SAFP;AAGE,IAAA,QAAQ,EAAE,CAAC,CAHb;AAGc,mBACC,IAJf;AAKE,IAAA,KAAK,EAAE,KALT;AAME,IAAA,KAAK,EAAE;AAAE,MAAA,OAAO,EAAE,CAAX;AAAc,MAAA,KAAK,EAAE,CAArB;AAAwB,MAAA,MAAM,EAAE,CAAhC;AAAmC,MAAA,MAAM,EAAE,CAAC,CAA5C;AAA+C,MAAA,QAAQ,EAAE,UAAzD;AAAqE,MAAA,IAAI,EAAE;AAA3E;AANT,GAAA,EAQE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AACE,IAAA,KAAK,EAAE,KAAK,CAAC,QAAN,GAAiB,KAAK,CAAC,QAAN,CAAe,IAAf,CAAoB,SAApB,EAA+B,KAA/B,CAAjB,GAAyD;AADlE,GAAA,CARF,CAzBF,CArBF,EA2DE,KAAA,CAAA,aAAA,CAAC,KAAD,EAAM;AACJ,IAAA,SAAS,EACC,UAAU,CACN,uDADM,EAEN,aAAa,CAAC,SAFR,EAGN;AAAE,eAAS,GAAG,KAAK;AAAnB,KAHM,CAFhB;AAOJ,IAAA,KAAK,EAAE,WAPH;AAQJ,IAAA,OAAO,EAAE,aAAa,CAAC,OARnB;AASJ,IAAA,MAAM,EAAE,UAAU,CAAC,OATf;AAUJ,IAAA,IAAI,EAAE,MAVF;AAWJ,IAAA,MAAM,EAAE,aAXJ;AAYJ,IAAA,OAAO,EAAE,aAZL;AAaJ,IAAA,QAAQ,EAAE,aAAa,CAAC;AAbpB,GAAN,EAeG,KAAK,CAAC,UAAN,IACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AACE,IAAA,SAAS,EAAC,WADZ;AAEE,IAAA,QAAQ,EAAE,QAFZ;AAGE,IAAA,GAAG,EAAE,QAHP;AAIE,IAAA,KAAK,EAAE,KAAK,CAAC,MAAN,KAAiB,SAAjB,GAA6B,MAA7B,GAAsC,KAAK,CAAC,MAJrD;AAKE,IAAA,QAAQ,EAAE,cALZ;AAME,IAAA,SAAS,EAAE;AANb,GAAA,CADF,EASE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,CATF,CAhBJ,EA4BG,IAAI,CAAC,MAAL,GAAc,CAAd,GACC,KAAA,CAAA,aAAA,CAAC,QAAD,EAAS;AACP,IAAA,GAAG,EAAE,WADE;AAEP,IAAA,QAAQ,EAAE,QAFH;AAGP,IAAA,IAAI,EAAE,YAHC;AAIP,IAAA,YAAY,EAAE,WAJP;AAKP,IAAA,SAAS,EAAE,KAAK,CAAC,SALV;AAMP,IAAA,WAAW,EAAE,WANN;AAOP,IAAA,WAAW,EAAE,KAAK,CAAC,WAPZ;AAQP,IAAA,aAAa,EAAE,aARR;AASP,IAAA,WAAW,EAAE,IATN;AAUP,IAAA,WAAW,EAAE,QAVN;AAWP,IAAA,cAAc,EAAE,QAXT;AAYP,IAAA,IAAI,EAAE,KAAK,CAAC;AAZL,GAAT,CADD,GAgBO,KAAA,CAAA,aAAA,CAAC,MAAD,EAAO,IAAP,EACG,YAAY,CAAC,gBAAb,CAA8B,MAA9B,EAAsC,QAAQ,CAAC,MAAD,CAA9C,CADH,CA5CV,CA3DF,CADF;AAgHA,SAAO,KAAK,GACV,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,IAAA,KAAK,EAAE,KADK;AAEZ,IAAA,WAAW,EAAE,gBAFD;AAGZ,IAAA,iBAAiB,EAAE,WAHP;AAIZ,IAAA,WAAW,EAAE,OAJD;AAKZ,IAAA,cAAc,EAAE,QALJ;AAMZ,IAAA,QAAQ,EAAE,EANE;AAOZ,IAAA,KAAK,EAAE;AAAE,MAAA,KAAK,EAAE,KAAK,GAAG,KAAK,CAAC,KAAT,GAAiB;AAA/B,KAPK;AAQZ,IAAA,QAAQ,EAAE,YARE;AASZ,IAAA,GAAG,EAAE;AATO,GAAd,CADU,GAYR,YAZJ;AAaH,CAvf2B,CAArB;AAyfP,IAAM,SAAS,GAAG;AACd,EAAA,MAAM,EAAE,SAAS,CAAC,IADJ;AAEd,EAAA,QAAQ,EAAE,SAAS,CAAC,IAFN;AAGd,EAAA,GAAG,EAAE,SAAS,CAAC,MAHD;AAId,EAAA,QAAQ,EAAE,SAAS,CAAC,MAJN;AAKd,EAAA,SAAS,EAAE,SAAS,CAAC,MALP;AAMd,EAAA,IAAI,EAAE,SAAS,CAAC,KANF;AAOd,EAAA,KAAK,EAAE,SAAS,CAAC,GAPH;AAQd,EAAA,QAAQ,EAAE,SAAS,CAAC,IARN;AASd,EAAA,WAAW,EAAE,SAAS,CAAC,MATT;AAUd,EAAA,WAAW,EAAE,SAAS,CAAC,MAAV,CAAiB,UAVhB;AAWd,EAAA,SAAS,EAAE,SAAS,CAAC,MAAV,CAAiB,UAXd;AAYd,EAAA,WAAW,EAAE,SAAS,CAAC,MAZT;AAad,EAAA,WAAW,EAAE,SAAS,CAAC,MAbT;AAcd,EAAA,aAAa,EAAE,SAAS,CAAC,MAdX;AAed,EAAA,SAAS,EAAE,SAAS,CAAC,MAfP;AAgBd,EAAA,KAAK,EAAE,SAAS,CAAC,MAhBH;AAiBd,EAAA,KAAK,EAAE,SAAS,CAAC,MAjBH;AAkBd,EAAA,iBAAiB,EAAE,SAAS,CAAC,MAlBf;AAmBd,EAAA,cAAc,EAAE,SAAS,CAAC,IAnBZ;AAoBd,EAAA,KAAK,EAAE,SAAS,CAAC,IApBH;AAqBd,EAAA,QAAQ,EAAE,SAAS,CAAC,IArBN;AAsBd,EAAA,IAAI,EAAE,SAAS,CAAC,MAtBF;AAuBd,EAAA,EAAE,EAAE,SAAS,CAAC,MAvBA;AAwBd,EAAA,cAAc,EAAE,SAAS,CAAC,MAxBZ;AAyBd,EAAA,eAAe,EAAE,SAAS,CAAC,MAzBb;AA0Bd,EAAA,UAAU,EAAE,SAAS,CAAC,IA1BR;AA2Bd,EAAA,MAAM,EAAE,SAAS,CAAC,MA3BJ;AA4Bd,EAAA,OAAO,EAAE,SAAS,CAAC,IA5BL;AA6Bd,EAAA,aAAa,EAAE,SAAS,CAAC,KAAV,CAAgB;AAC3B,IAAA,OAAO,EAAE,SAAS,CAAC,SAAV,CAAoB,CAAC,SAAS,CAAC,IAAX,EAAiB,SAAS,CAAC,KAAV,CAAgB;AAC1D,MAAA,YAAY,EAAE,SAAS,CAAC,MADkC;AAE1D,MAAA,aAAa,EAAE,SAAS,CAAC;AAFiC,KAAhB,CAAjB,CAApB,CADkB;AAK3B,IAAA,SAAS,EAAE,SAAS,CAAC,MALM;AAM3B,IAAA,QAAQ,EAAE,SAAS,CAAC,GANO;AAO3B,IAAA,KAAK,EAAE,SAAS,CAAC,SAAV,CAAoB,CAAC,SAAS,CAAC,MAAX,EAAmB,SAAS,CAAC,MAA7B,CAApB,CAPoB;AAQ3B,IAAA,MAAM,EAAE,SAAS,CAAC,SAAV,CAAoB,CAAC,SAAS,CAAC,MAAX,EAAmB,SAAS,CAAC,MAA7B,CAApB;AARmB,GAAhB,CA7BD;AAuCd,EAAA,MAAM,EAAE,SAAS,CAAC,IAvCJ;AAwCd,EAAA,OAAO,EAAE,SAAS,CAAC,IAxCL;AAyCd,EAAA,OAAO,EAAE,SAAS,CAAC,IAzCL;AA0Cd,EAAA,MAAM,EAAE,SAAS,CAAC,IA1CJ;AA2Cd,EAAA,QAAQ,EAAE,SAAS,CAAC,IA3CN;AA4Cd,EAAA,cAAc,EAAE,SAAS,CAAC,IA5CZ;AA6Cd,EAAA,cAAc,EAAE,SAAS,CAAC,IA7CZ;AA8Cd,EAAA,IAAI,EAAE,SAAS,CAAC,IA9CF;AA+Cd,EAAA,WAAW,EAAE,SAAS,CAAC,IA/CT;AAgDd,EAAA,UAAU,EAAE,SAAS,CAAC;AAhDR,CAAlB;AAmDA,YAAY,CAAC,WAAb,GAA2B,wBAA3B;AACC,YAAoC,CAAC,SAArC,GAAiD,SAAjD","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, noop, useRtl, getTabIndex, Keys, mapTree, extendDataItem, guid } from '@progress/kendo-react-common';\nimport { Popup } from '@progress/kendo-react-popup';\nimport { useLocalization } from '@progress/kendo-react-intl';\nimport { TreeView } from '@progress/kendo-react-treeview';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './../package-metadata';\nimport { getItemValue, areSame, isPresent } from '../common/utils';\nimport { useDropdownWidth } from './useDropdownWidth';\nimport { ListNoData } from './ListNoData';\nimport { messages, clear, nodata } from './../messages';\nimport { FloatingLabel } from '@progress/kendo-react-labels';\nvar VALIDATION_MESSAGE = 'Please select a value from the list!';\nvar ValueHolder = function (props) { return React.createElement(React.Fragment, null, props.children); };\nvar toLevel = function (hierarchicalIndex) {\n    return hierarchicalIndex.split('_').map(function (i) { return parseInt(i, 10); });\n};\nvar getValidity = function (_a, hasValue) {\n    var validationMessage = _a.validationMessage, valid = _a.valid, required = _a.required;\n    return ({\n        customError: validationMessage !== undefined,\n        valid: Boolean(valid !== undefined ? valid : (!required || hasValue)),\n        valueMissing: !hasValue\n    });\n};\nvar defaultProps = {\n    selectField: 'selected',\n    subItemsField: 'items',\n    popupSettings: {\n        animate: true,\n        width: '200px',\n        height: '200px'\n    },\n    required: false,\n    validityStyles: true\n};\n/**\n * Represents the DropDownTree component.\n */\nexport var DropDownTree = React.forwardRef(function (props, ref) {\n    validatePackage(packageMetadata);\n    var calculatedId = React.useMemo(function () { return guid(); }, []);\n    var id = props.id || calculatedId;\n    var _a = props.data, data = _a === void 0 ? [] : _a, dataItemKey = props.dataItemKey, _b = props.popupSettings, popupSettings = _b === void 0 ? {} : _b, _c = props.style, style = _c === void 0 ? {} : _c, opened = props.opened, disabled = props.disabled, _d = props.onOpen, onOpen = _d === void 0 ? noop : _d, _e = props.onClose, onClose = _e === void 0 ? noop : _e, placeholder = props.placeholder, label = props.label, name = props.name, _f = props.selectField, selectField = _f === void 0 ? defaultProps.selectField : _f, _g = props.subItemsField, subItemsField = _g === void 0 ? defaultProps.subItemsField : _g, validationMessage = props.validationMessage, valid = props.valid, _h = props.required, required = _h === void 0 ? defaultProps.required : _h, _j = props.validityStyles, validityStyles = _j === void 0 ? defaultProps.validityStyles : _j;\n    var tabIndex = getTabIndex(props.tabIndex, disabled);\n    var target = React.useRef(null);\n    var elementRef = React.useRef(null);\n    var inputRef = React.useRef(null);\n    var selectRef = React.useRef(null);\n    var treeViewRef = React.useRef(null);\n    var skipFocusRef = React.useRef(false);\n    var _k = React.useState(undefined), stateValue = _k[0], setStateValue = _k[1];\n    var controlled = props.value !== undefined;\n    var value = controlled ? props.value : (stateValue !== undefined ? stateValue : props.defaultValue);\n    var hasValue = isPresent(value);\n    var currentValueText = hasValue ? getItemValue(value, props.textField) : '';\n    var validity = getValidity({ validationMessage: validationMessage, valid: valid, required: required }, hasValue);\n    var focus = React.useCallback(function () { return elementRef.current && elementRef.current.focus(); }, []);\n    React.useImperativeHandle(target, function () { return ({\n        props: props,\n        element: elementRef.current,\n        actionElement: elementRef.current,\n        focus: focus\n    }); });\n    React.useImperativeHandle(ref, function () { return target.current; });\n    var dir = useRtl(elementRef, props.dir);\n    var initialStyleWidth = popupSettings.width !== undefined ?\n        popupSettings.width : (style.width !== undefined ? style.width : defaultProps.popupSettings.width);\n    var popupWidth = useDropdownWidth(elementRef, initialStyleWidth);\n    var popupStyles = __assign({ width: popupWidth }, (dir !== undefined ? { direction: dir } : {}));\n    var _l = React.useState(false), open = _l[0], setOpen = _l[1];\n    var isOpen = opened !== undefined ? opened : open;\n    var _m = React.useState(false), focused = _m[0], setFocused = _m[1];\n    var _o = React.useState(''), filter = _o[0], setFilter = _o[1];\n    var setValidity = React.useCallback(function () {\n        if (selectRef.current && selectRef.current.setCustomValidity) {\n            selectRef.current.setCustomValidity(validity.valid\n                ? ''\n                : validationMessage === undefined ? VALIDATION_MESSAGE : validationMessage);\n        }\n    }, [validationMessage, validity]);\n    React.useEffect(setValidity);\n    var openPopup = React.useCallback(function (event) {\n        if (!isOpen) {\n            if (onOpen) {\n                var openEvent = __assign({}, event);\n                onOpen.call(undefined, openEvent);\n            }\n            if (opened === undefined) {\n                setOpen(true);\n            }\n        }\n    }, [isOpen, opened, onOpen]);\n    var closePopup = React.useCallback(function (event) {\n        if (isOpen) {\n            if (onClose) {\n                var closeEvent = __assign({}, event);\n                onClose.call(undefined, closeEvent);\n            }\n            if (opened === undefined) {\n                setOpen(false);\n            }\n        }\n    }, [isOpen, opened, onClose]);\n    var onWrapperClick = React.useCallback(function (event) {\n        if (!event.isDefaultPrevented() && target.current) {\n            setFocused(true);\n            var ev = {\n                syntheticEvent: event,\n                nativeEvent: event.nativeEvent,\n                target: target.current\n            };\n            (isOpen ? closePopup : openPopup)(ev);\n        }\n    }, [isOpen, opened, onOpen, onClose]);\n    var switchFocus = React.useCallback(function (focusFn) {\n        skipFocusRef.current = true;\n        focusFn();\n        window.setTimeout(function () { return skipFocusRef.current = false; }, 0);\n    }, []);\n    var onWrapperKeyDown = React.useCallback(function (event) {\n        var keyCode = event.keyCode, altKey = event.altKey;\n        var treeview = treeViewRef.current && treeViewRef.current.element;\n        if (!target.current || (event.isDefaultPrevented() && inputRef.current === event.target)) {\n            return;\n        }\n        var ev = {\n            syntheticEvent: event,\n            nativeEvent: event.nativeEvent,\n            target: target.current\n        };\n        if (isOpen) {\n            if (keyCode === Keys.esc || (altKey && keyCode === Keys.up)) {\n                closePopup(ev);\n            }\n            else if (treeview && treeview.querySelector('.k-state-focused') &&\n                (keyCode === Keys.up || keyCode === Keys.down ||\n                    keyCode === Keys.left || keyCode === Keys.right ||\n                    keyCode === Keys.home || keyCode === Keys.end)) {\n                if (keyCode === Keys.up && inputRef.current) {\n                    var items = Array.from(treeview.querySelectorAll('.k-treeview-item'));\n                    var focusedItem = items.slice().reverse().find(function (i) { return Boolean(i && i.querySelector('.k-state-focused')); });\n                    if (focusedItem && items.indexOf(focusedItem) === 0) {\n                        return switchFocus(function () { focusElement(inputRef.current); });\n                    }\n                }\n                switchFocus(noop);\n            }\n            else if (keyCode === Keys.down) {\n                switchFocus(function () { focusElement(inputRef.current || treeview); });\n            }\n        }\n        else {\n            if (altKey && keyCode === Keys.down) {\n                openPopup(ev);\n            }\n        }\n    }, [isOpen, opened, onOpen, onClose]);\n    var onInputKeyDown = React.useCallback(function (event) {\n        var keyCode = event.keyCode, altKey = event.altKey;\n        if (altKey || (keyCode !== Keys.up && keyCode !== Keys.down)) {\n            return;\n        }\n        event.preventDefault();\n        switchFocus(keyCode === Keys.up ?\n            function () { focusElement(elementRef.current); } :\n            function () { focusElement(treeViewRef.current && treeViewRef.current.element); });\n    }, []);\n    var focusElement = React.useCallback(function (element) {\n        if (element) {\n            switchFocus(function () { return element.focus(); });\n        }\n    }, []);\n    var onPopupOpened = React.useCallback(function () {\n        if (!focused && isOpen) {\n            closePopup({ target: target.current });\n        }\n        else {\n            if (props.filterable) {\n                focusElement(inputRef.current);\n            }\n            else {\n                focusElement(treeViewRef.current && treeViewRef.current.element);\n            }\n        }\n    }, [onClose, props.filterable, focused, opened, isOpen]);\n    var onPopupClosed = React.useCallback(function () {\n        if (focused) {\n            // Move the focus from treeview to dropdown without triggering Focus or Blur events.\n            focusElement(elementRef.current);\n        }\n    }, [focused]);\n    var onFocus = React.useCallback(function (event) {\n        if (!focused && !skipFocusRef.current) {\n            setFocused(true);\n            if (props.onFocus && target.current) {\n                var focusEvent = {\n                    syntheticEvent: event,\n                    nativeEvent: event.nativeEvent,\n                    target: target.current\n                };\n                props.onFocus.call(undefined, focusEvent);\n            }\n        }\n    }, [focused, props.onFocus]);\n    var onBlur = React.useCallback(function (event) {\n        if (focused && !skipFocusRef.current && target.current) {\n            setFocused(false);\n            var ev = {\n                syntheticEvent: event,\n                nativeEvent: event.nativeEvent,\n                target: target.current\n            };\n            if (props.onBlur) {\n                var focusEvent = __assign({}, ev);\n                props.onBlur.call(undefined, focusEvent);\n            }\n            closePopup(ev);\n        }\n    }, [focused, props.onBlur, isOpen, opened, onClose]);\n    var onWrapperMouseDown = React.useCallback(function () {\n        if (focused) {\n            // moving focus from treeview to dropdown triggers Focus and Blur events.\n            switchFocus(noop);\n        }\n    }, [focused]);\n    var changeValue = React.useCallback(function (event, newValue, hierarchicalIndex) {\n        if (props.onChange) {\n            var changeEvent = __assign({ value: newValue, level: hierarchicalIndex ? toLevel(hierarchicalIndex) : [] }, event);\n            props.onChange.call(undefined, changeEvent);\n        }\n        if (!controlled) {\n            setStateValue(newValue);\n        }\n    }, [props.onChange, controlled]);\n    var onChange = React.useCallback(function (event) {\n        if (areSame(event.item, value, dataItemKey) || !target.current) {\n            return;\n        }\n        var item = event.item, itemHierarchicalIndex = event.itemHierarchicalIndex, nativeEvent = event.nativeEvent, syntheticEvent = event.syntheticEvent;\n        var ev = {\n            syntheticEvent: syntheticEvent,\n            nativeEvent: nativeEvent,\n            target: target.current\n        };\n        changeValue(ev, item, itemHierarchicalIndex);\n        closePopup(ev);\n    }, [controlled, value, props.onChange, dataItemKey, isOpen, opened, onClose]);\n    var onClear = React.useCallback(function (event) {\n        if (!target.current) {\n            return;\n        }\n        var ev = {\n            syntheticEvent: event,\n            nativeEvent: event.nativeEvent,\n            target: target.current\n        };\n        changeValue(ev, null);\n        closePopup(ev);\n        event.preventDefault();\n    }, [controlled, props.onChange, isOpen, opened, onClose]);\n    var onExpand = React.useCallback(function (event) {\n        if (props.onExpandChange && target.current) {\n            var item = event.item, itemHierarchicalIndex = event.itemHierarchicalIndex, nativeEvent = event.nativeEvent, syntheticEvent = event.syntheticEvent;\n            var expandEvent = {\n                level: toLevel(itemHierarchicalIndex),\n                item: item, nativeEvent: nativeEvent, syntheticEvent: syntheticEvent, target: target.current\n            };\n            props.onExpandChange.call(undefined, expandEvent);\n        }\n    }, [props.onExpandChange]);\n    var onFilterChange = React.useCallback(function (event) {\n        if (props.onFilterChange && target.current) {\n            var filterDesc = { field: props.textField, operator: 'contains', value: event.target.value };\n            var ev = {\n                filter: filterDesc,\n                syntheticEvent: event,\n                nativeEvent: event.nativeEvent,\n                target: target.current\n            };\n            props.onFilterChange.call(undefined, ev);\n            if (props.filter === undefined) {\n                setFilter(event.target.value);\n            }\n        }\n    }, [props.onFilterChange, props.filter, props.textField]);\n    var treeViewData = React.useMemo(function () {\n        return (controlled || !hasValue) ? data :\n            mapTree(data, subItemsField, function (item) {\n                var _a;\n                return extendDataItem(item, subItemsField, (_a = {}, _a[selectField] = areSame(item, value, dataItemKey), _a));\n            });\n    }, [data, value, controlled, hasValue, selectField, subItemsField]);\n    var NoData = props.listNoData || ListNoData;\n    var ValueComponent = props.valueHolder || ValueHolder;\n    var localization = useLocalization();\n    var isValid = !validityStyles || validity.valid;\n    var dropdowntree = (React.createElement(\"span\", { className: classNames('k-widget k-dropdowntree k-dropdowntree-clearable', props.className), tabIndex: tabIndex, accessKey: props.accessKey, id: id, style: label ? __assign({}, style, { width: undefined }) : style, dir: dir, ref: elementRef, onKeyDown: disabled ? undefined : onWrapperKeyDown, onMouseDown: onWrapperMouseDown, onFocus: onFocus, onBlur: onBlur, role: \"listbox\", \"aria-haspopup\": \"true\", \"aria-expanded\": isOpen, \"aria-disabled\": disabled, \"aria-label\": label, \"aria-labelledby\": props.ariaLabelledBy, \"aria-describedby\": props.ariaDescribedBy },\n        React.createElement(\"span\", { className: classNames('k-dropdown-wrap', {\n                'k-state-focused': focused,\n                'k-state-disabled': disabled,\n                'k-state-invalid': !isValid\n            }), onClick: disabled ? undefined : onWrapperClick },\n            React.createElement(\"span\", { className: \"k-input\" },\n                React.createElement(ValueComponent, { item: value }, currentValueText || placeholder)),\n            hasValue && !disabled && (React.createElement(\"span\", { onClick: onClear, className: \"k-icon k-clear-value k-i-close\", title: localization.toLanguageString(clear, messages[clear]), role: \"button\", tabIndex: -1, onMouseDown: function (e) { return e.preventDefault(); } })),\n            React.createElement(\"span\", { className: \"k-select\", \"aria-label\": \"select\" },\n                React.createElement(\"span\", { className: classNames('k-icon', { 'k-i-arrow-60-down': !props.loading, 'k-i-loading': props.loading }) })),\n            React.createElement(\"select\", { name: name, ref: selectRef, tabIndex: -1, \"aria-hidden\": true, title: label, style: { opacity: 0, width: 1, border: 0, zIndex: -1, position: 'absolute', left: '50%' } },\n                React.createElement(\"option\", { value: props.valueMap ? props.valueMap.call(undefined, value) : value }))),\n        React.createElement(Popup, { className: classNames('k-list-container k-group k-reset k-popup-dropdowntree', popupSettings.className, { 'k-rtl': dir === 'rtl' }), style: popupStyles, animate: popupSettings.animate, anchor: elementRef.current, show: isOpen, onOpen: onPopupOpened, onClose: onPopupClosed, appendTo: popupSettings.appendTo },\n            props.filterable && (React.createElement(\"span\", { className: \"k-list-filter\" },\n                React.createElement(\"input\", { className: \"k-textbox\", tabIndex: tabIndex, ref: inputRef, value: props.filter === undefined ? filter : props.filter, onChange: onFilterChange, onKeyDown: onInputKeyDown }),\n                React.createElement(\"span\", { className: \"k-icon k-i-zoom\" }))),\n            data.length > 0 ? (React.createElement(TreeView, { ref: treeViewRef, tabIndex: tabIndex, data: treeViewData, focusIdField: dataItemKey, textField: props.textField, selectField: selectField, expandField: props.expandField, childrenField: subItemsField, expandIcons: true, onItemClick: onChange, onExpandChange: onExpand, item: props.item })) : (React.createElement(NoData, null, localization.toLanguageString(nodata, messages[nodata]))))));\n    return label ? (React.createElement(FloatingLabel, { label: label, editorValue: currentValueText, editorPlaceholder: placeholder, editorValid: isValid, editorDisabled: disabled, editorId: id, style: { width: style ? style.width : undefined }, children: dropdowntree, dir: dir })) : dropdowntree;\n});\nvar propTypes = {\n    opened: PropTypes.bool,\n    disabled: PropTypes.bool,\n    dir: PropTypes.string,\n    tabIndex: PropTypes.number,\n    accessKey: PropTypes.string,\n    data: PropTypes.array,\n    value: PropTypes.any,\n    valueMap: PropTypes.func,\n    placeholder: PropTypes.string,\n    dataItemKey: PropTypes.string.isRequired,\n    textField: PropTypes.string.isRequired,\n    selectField: PropTypes.string,\n    expandField: PropTypes.string,\n    subItemsField: PropTypes.string,\n    className: PropTypes.string,\n    style: PropTypes.object,\n    label: PropTypes.string,\n    validationMessage: PropTypes.string,\n    validityStyles: PropTypes.bool,\n    valid: PropTypes.bool,\n    required: PropTypes.bool,\n    name: PropTypes.string,\n    id: PropTypes.string,\n    ariaLabelledBy: PropTypes.string,\n    ariaDescribedBy: PropTypes.string,\n    filterable: PropTypes.bool,\n    filter: PropTypes.string,\n    loading: PropTypes.bool,\n    popupSettings: PropTypes.shape({\n        animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n                openDuration: PropTypes.number,\n                closeDuration: PropTypes.number\n            })]),\n        className: PropTypes.string,\n        appendTo: PropTypes.any,\n        width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    }),\n    onOpen: PropTypes.func,\n    onClose: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onChange: PropTypes.func,\n    onFilterChange: PropTypes.func,\n    onExpandChange: PropTypes.func,\n    item: PropTypes.func,\n    valueHolder: PropTypes.func,\n    listNoData: PropTypes.func\n};\nDropDownTree.displayName = 'KendoReactDropDownTree';\nDropDownTree.propTypes = propTypes;\n//# sourceMappingURL=DropDownTree.js.map"]},"metadata":{},"sourceType":"module"}